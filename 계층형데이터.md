# 계층형데이터

>   계층형 데이터란 동일 테이블에 계층적으로 상위와 하위 데이터가 포함된 데이터를 말한다 
>
>   #### START WITH절
>
>   -    계층 구조 전개 시작 위치를 정하는 구문 , 즉 부모를 지정한다
>
>   #### CONNECT BY절 
>
>   -   자식 데이터를 지정하는 구문,자식 데이터는 CONNECT BY절에 주어진 조건을 만족해야함
>
>   #### PRIOR 
>
>   -   CONNECT BY절에 사용되며 현재 읽은 컬럼을 지정함
>
>   -   PRIOR자식= 부모 형태는 순방향으로 부모 -> 자식 방향임 
>   -   PRIOR 부모= 자식 형태는 역방향으로 자식 -> 부모 방향임 (ROOT를향한다)
>
>   #### NOCYCLE
>
>   -   데이터를 전개하면서 이미 나타났던 동일한 데이터가 전개중에 다시 나타나면 이것을 가리켜 사이클(CYCLE)이 형성되었다고 하며, 사이클이 발생한 데이터는 런타임 오류가 발생한다.<u>하지만 NOCYCLE를 추가하면 사이클이 발생한 이후의 데이터는 전개하지 않는다</u>
>
>   ### ORDER SIBLING BY
>
>   -   형제 노트(동일LEVEL) 사이에서 정렬을 수행
>
>   ### WHERE
>
>   -   모든 전개를 수행한 후에 지정된 조건을 만족하는 데이터만 추출함
>
>   
>
>   ### 계층형 질의에서 사용되는 가상컬럼
>
>   -   **LEVEL** :루트 데이터이면 1, 그 하위 데이터이면 2이다 리프(Leaf)데이터까지 1씩증가한다
>   -   **CONNECT_BY_ISLEAF**  : 전개 과정에서 해당 데이터가 리프 데이터이면 1, 그렇지 않으면 0이다
>   -   **CONNECT_BY_ISCYCLE** : 전개 과정에서 자식을 갖는다 해당 데이터가 조상으로서 존재하면 1 그렇지 않으면 0이다 여기서 조상이란 자신으로 부터 루트까지의 경로에 존재하는 데이터를 말합니다 CYCLE옵션을 사용했을때만 사용할 수 있다.
>   -   







## Nested Loop Join

하나의 테이블에서 데이터를 먼저 찾고 그다음 테이블을 조인하는방식

먼저 조회되는 테이블 = 외부테이블 , 그다음 조회되는 테이블 = 내부테이블

작은크기의 테이블을 먼저 찾는게 스캔의 범위를 줄여준다

**RANDOM ACCESS가 발생하는데 RANDOM ACCESS가 많이 발생하면 성능 지연이 발생한다**

#### ordered 힌트

-   FROMM절에 나오는 테이블 순서대로 조인하게 하는것

-   use_nl,use_merge,use_hash 힌트와 함께 사용한다

-   ```tmysql
    SELECT /*+ ordered use_nl(b) */
    ```

    



## over()함수

>   order by, group by 서브쿼리를 개선하기 위해 나온 함수
>
>   ```mysql
>   COUNT()OVER():전체행카운트
>   COUNT()OVER(PARTITION BY컬럼) : 그룹단위로 나누어 카운트
>   MAX(컬럼)OVER():전체행 중에 최고값
>   MAX(컬럼)OVER(PARTITION BY 컬럼) :그룹내 최고값
>   등등...
>   ```
>
>   





:book:그룹함수를 사용하는경우 NULL값은 연산에서 제외된다 (그냥안나옴)





